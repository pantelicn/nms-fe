<nav ngbNav #nav="ngbNav" class="navbar fixed-top navbar-light bg-white d-flex justify-content-center">
  <a class="navbar-brand d-none d-md-block" href="#">
    <img src="../../../assets/icons/nullhire.svg" alt="" class="d-inline-block nullhire-logo">
  </a>
  <a [routerLink]="['profile']" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex d-md-none flex-column align-items-center">
    <bi name="person-circle" class="icon lead"></bi>
    <small>My profile</small>
  </a>
  <div class="mr-2 col-lg-4 col-md-5 col-7 search-input">
    <div class="input-group">
      <span class="input-group-append">
        <div class="input-group-text bg-white border-right-0 border-primary rounded-left"><bi name="search" class="search-icon"></bi></div>
      </span>
      <input id="typeahead-template"
            type="text"
            class="form-control py-2 border-left-0 border border-primary"
            [(ngModel)]="companyStartsWith"
            [ngbTypeahead]="search"
            [resultTemplate]="rt"
            [inputFormatter]="formatter"
            placeholder="Search companies">
    </div>
  </div>
  <div class="dropdown show d-lg-none">
    <a class="text-primary text-decoration-none mr-2 d-flex flex-column align-items-center" id="dropdown-menu" role="button" data-toggle="dropdown" aria-haspopup="true">
      <bi name="list" class="menu-icon lead"></bi>
    </a>
    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdown-menu">
      <a class="dropdown-item btn-outline-primary" role="button" (click)="onLogout()">Sign out</a>
    </div>
  </div>
  <div class="d-none d-lg-flex">
    <a routerLink="/talent" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
      <bi name="house-door-fill" class="icon lead"></bi>
      <small>Home</small>
    </a>
    <a [routerLink]="['messages']" [routerLinkActiveOptions]="{exact: true}" (click)="setMessagesToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
      <bi name="envelope-fill" class="icon lead"></bi>
      <small>Messages</small>
      <span *ngIf="notificationStatus && notificationStatus.unseenMessages > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
        {{notificationStatus.unseenMessages}}
      </span>
    </a>
    <a [routerLink]="['requests']" [routerLinkActiveOptions]="{exact: false}" (click)="setRequestsToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
      <bi name="person-bounding-box" class="icon lead"></bi>
      <small>Requests</small>
      <span *ngIf="notificationStatus && notificationStatus.unseenRequests > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
        {{notificationStatus.unseenRequests}}
      </span>
    </a>
    <a [routerLink]="['notifications']" [routerLinkActiveOptions]="{exact: true}" (click)="setInfoNotificationsToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
      <bi name="bell-fill" class="icon lead">
      </bi>
      <small>Notifications</small>
      <span *ngIf="notificationStatus && notificationStatus.unseenInfoNotifications > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
        {{notificationStatus.unseenInfoNotifications}}
      </span>
    </a>
    <a [routerLink]="['profile']" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
      <bi name="person-circle" class="icon lead"></bi>
      <small>My profile</small>
    </a>
    <a class="btn btn-outline-primary rounded-pill shadow-none ml-2" (click)="onLogout()">Sign Out</a>
  </div>
</nav>
<div class="d-lg-none fixed-bottom bg-light d-flex justify-content-center py-1">
  <a routerLink="/talent" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
    <bi name="house-door-fill" class="icon lead"></bi>
    <small>Home</small>
  </a>
  <a [routerLink]="['messages']" [routerLinkActiveOptions]="{exact: true}" (click)="setMessagesToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
    <bi name="envelope-fill" class="icon lead"></bi>
    <small>Messages</small>
    <span *ngIf="notificationStatus && notificationStatus.unseenMessages > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
      {{notificationStatus.unseenMessages}}
    </span>
  </a>
  <a [routerLink]="['requests']" [routerLinkActiveOptions]="{exact: true}" (click)="setRequestsToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
    <bi name="person-bounding-box" class="icon lead"></bi>
    <small>Requests</small>
    <span *ngIf="notificationStatus && notificationStatus.unseenRequests > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
      {{notificationStatus.unseenRequests}}
    </span>
  </a>
  <a [routerLink]="['notifications']" [routerLinkActiveOptions]="{exact: true}" (click)="setInfoNotificationsToSeen()" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-flex flex-column align-items-center">
    <bi name="bell-fill" class="icon lead">
    </bi>
    <small>Notifications</small>
    <span *ngIf="notificationStatus && notificationStatus.unseenInfoNotifications > 0" class="nms-notification position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ml-4">
      {{notificationStatus.unseenInfoNotifications}}
    </span>
  </a>
  <a [routerLink]="['profile']" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="nms-active" class="text-secondary text-decoration-none mr-2 d-md-flex d-none flex-column align-items-center">
    <bi name="person-circle" class="icon lead"></bi>
    <small>My profile</small>
  </a>
</div>

<ng-template #rt let-r="result" let-t="term">
  <div (click)="openCompanyProfile(r.id)">
    <img *ngIf="r.profileImage" [src]="getImageUrl(r.profileImage)"
    class="mr-2 rounded-circle" 
    style="width: 2em" />
    <bi *ngIf="!r.profileImage" class="bg-light rounded-circle text-secondary mr-2 d-inline-block" style="width: 2em" name="person-circle"></bi>
    <ngb-highlight [result]="r.name" [term]="t"></ngb-highlight>
  </div>
</ng-template>